<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="src/img/favicon.svg" type="image/x-icon">
    <script src="src/js/admin.js" type="module"></script>
    <link rel="stylesheet" href="src/sass/admin.css">
    <title>Админ-панель - Dungeon Master's Hub</title>
</head>
<body>
    <div class="layout">
        <!-- Sidebar -->
        <aside class="aside">
            <a href="/" class="aside__back">
                <img src="src/img/back.svg" alt="Назад">
            </a>

            <div class="aside__btns">
                <ul class="aside__list">
                    <a href="/">
                        <li class="aside__items">
                            <img src="src/img/logo.svg" alt="Главная" style="width: 94px">
                            <p class="txt hidden link">Главная</p>
                        </li>
                    </a>

                    <a href="/handbook.html">
                        <li class="aside__items">
                            <img src="src/img/directory.svg" alt="Справочник">
                            <p class="txt hidden">Справочник</p>
                        </li>
                    </a>

                    <li class="aside__items aside__active">
                        <img src="src/img/admin.svg" alt="Админ-панель">
                        <p class="txt hidden">Админ-панель</p>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- Основной контент -->
        <main class="main-content">
            <!-- Заголовок -->
            <div class="admin-header">
                <h1 class="admin-title">Админ-панель</h1>
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="activeSessionsCount">0</div>
                        <div class="stat-label">Активные сессии</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalUsersCount">0</div>
                        <div class="stat-label">Пользователи</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalItemsCount">0</div>
                        <div class="stat-label">Элементов БД</div>
                    </div>
                </div>
            </div>

            <!-- Табы -->
            <div class="admin-tabs">
                <button class="tab-btn active" data-tab="sessions">Активные сессии</button>
                <button class="tab-btn" data-tab="database">Управление БД</button>
                <button class="tab-btn" data-tab="users">Пользователи</button>
            </div>

            <!-- Контент табов -->
            <div class="tab-content">
                <!-- Активные сессии -->
                <div class="tab-pane active" id="sessions-pane">
                    <div class="pane-header">
                        <h2>Активные игровые сессии</h2>
                        <button class="btn btn-primary" id="refreshSessionsBtn">
                            <img src="src/img/refresh.svg" alt="Обновить" style="width: 20px; height: 20px;">
                            Обновить
                        </button>
                    </div>
                    <div class="sessions-list" id="sessionsList">
                        <!-- Список сессий будет здесь -->
                    </div>
                </div>

                <!-- Управление БД -->
                <div class="tab-pane" id="database-pane">
                    <div class="pane-header">
                        <h2>Управление базой данных</h2>
                        <div class="db-controls">
                            <select id="dbTableSelect" class="filter-select">
                                <option value="расы">Расы</option>
                                <option value="классы">Классы</option>
                                <option value="заклинания">Заклинания</option>
                                <option value="монстры">Монстры</option>
                                <option value="предметы">Предметы</option>
                                <option value="черты_рас">Черты рас</option>
                                <option value="умения_классов">Умения классов</option>
                                <option value="способности_монстров">Способности монстров</option>
                            </select>
                            <button class="btn btn-primary" id="addItemBtn">Добавить элемент</button>
                            <button class="btn btn-secondary" id="exportDbBtn">Экспорт БД</button>
                            <button class="btn btn-danger" id="importDbBtn">Импорт БД</button>
                        </div>
                    </div>
                    
                    <div class="db-table-container">
                        <table class="db-table" id="dbTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Название</th>
                                    <th>Описание</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="dbTableBody">
                                <!-- Данные таблицы будут здесь -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Пользователи -->
                <div class="tab-pane" id="users-pane">
                    <div class="pane-header">
                        <h2>Управление пользователями</h2>
                        <button class="btn btn-danger" id="clearUsersBtn">Очистить неактивных</button>
                    </div>
                    <div class="users-list" id="usersList">
                        <!-- Список пользователей будет здесь -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Модальные окна -->
    <!-- Модальное окно добавления/редактирования элемента -->
    <div class="modal-overlay hidden" id="itemModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title" id="itemModalTitle">Добавить элемент</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="itemForm" class="modal-body">
                <div id="formFields">
                    <!-- Поля формы будут генерироваться динамически -->
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelItemBtn">Отмена</button>
                    <button type="submit" class="btn btn-primary" id="saveItemBtn">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно подтверждения удаления -->
    <div class="modal-overlay hidden" id="confirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Подтверждение</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Вы уверены, что хотите выполнить это действие?</p>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelConfirmBtn">Отмена</button>
                    <button type="button" class="btn btn-danger" id="confirmBtn">Подтвердить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно импорта БД -->
    <div class="modal-overlay hidden" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Импорт базы данных</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Выберите JSON файл</label>
                    <input type="file" id="dbFileInput" accept=".json" class="form-input">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelImportBtn">Отмена</button>
                    <button type="button" class="btn btn-primary" id="importDbConfirmBtn">Импортировать</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>