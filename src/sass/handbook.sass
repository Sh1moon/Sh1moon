// Импорт общих стилей
@use 'variables' as *

a
    text-decoration: none
body
    margin: 0
=flex-center
    display: flex
    align-items: center
    justify-content: center

=flex-between
    display: flex
    align-items: center
    justify-content: space-between

=transition($property: all, $duration: 0.3s, $easing: ease)
    transition: $property $duration $easing

=text-style($size: inherit, $color: $text-color, $font: $font-secondary)
    font-size: $size
    color: $color
    font-family: $font
    text-decoration: none
// Переменные
$sidebar-width: 201px
$bg-color: #122436
$sidebar-expanded-width: 400px
$main-bg-color: $bg-color

// Основной лейаут
.layout
    display: flex
    min-height: 100vh
    background-color: $main-bg-color

// Sidebar
.aside
    position: relative
    display: flex
    flex-direction: column
    align-items: center
    justify-content: start
    background-color: $bg-color
    width: $sidebar-width
    border-right: solid $accent-color 5px
    gap: 106px
    transition: 1s ease
    flex-shrink: 0
    font-family: 'Slovic'

    &:hover
        width: $sidebar-expanded-width
        justify-content: start

        .hidden
            display: block !important
            opacity: 1
            transition: 1s ease

    &__back
        width: 148px
        padding-top: 20px
        cursor: pointer
        transition: 1s ease

        &:hover
            transform: scale(1.2)

    &__list
        display: flex
        flex-direction: column
        gap: 67px
        transition: 1s ease


    &__items
        display: flex
        align-items: center
        justify-content: center
        height: 127px
        cursor: pointer
        transition: 1s ease
        gap: 20px
        border-radius: 12px

        &:hover
            transform: scale(1.2)

        & > p
            color: $accent-color
            font-family: 'Slovic'

    &__active
        background-color: $text-color

// Основной контент
.main-content
    flex: 1
    padding: 2rem
    overflow-y: auto

// Панель управления
.controls-panel
    display: flex
    justify-content: space-between
    align-items: center
    margin-bottom: 2rem
    gap: 2rem
    flex-wrap: wrap

.search-container
    display: flex
    align-items: center
    background: rgba(239, 221, 191, 0.1)
    border: 2px solid $accent-color
    border-radius: 25px
    padding: 0.5rem 1rem
    flex: 1
    min-width: 300px
    max-width: 500px

.search-input
    background: none
    border: none
    color: $text-color
    font-size: 1rem
    flex: 1
    padding: 0.5rem
    outline: none

    &::placeholder
        color: rgba(239, 221, 191, 0.6)

.search-btn
    background: none
    border: none
    cursor: pointer
    padding: 0.5rem
    +transition(transform)

    &:hover
        transform: scale(1.1)

    img
        width: 20px
        height: 20px

.filters-container
    display: flex
    gap: 1rem
    flex-wrap: wrap

.filter-select
    background: rgba(239, 221, 191, 0.1)
    border: 2px solid $accent-color
    border-radius: 8px
    color: $text-color
    padding: 0.5rem 1rem
    font-size: 1rem
    cursor: pointer
    outline: none
    min-width: 150px

    option
        background: $bg-color
        color: $text-color

// Сетка контента
.content-grid
    display: grid
    grid-template-columns: repeat(auto-fill, minmax(380px, 2fr))
    gap: 3rem
    margin-bottom: 2rem

// Карточки
.entity-card
    background: rgba(18, 36, 54, 0.8)
    border: 2px solid $accent-color
    border-radius: 15px
    cursor: pointer
    transition: all 0.3s ease
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2)
    width: 20vw


    &:hover
        transform: translateY(-5px)
        box-shadow: 0 8px 25px rgba(195, 149, 90, 0.3)
        border-color: $text-color

    &__image
        width: 20vw
        height: 35vw

    &__content
        padding: 1.5rem

    &__title
        +text-style(1.3rem, $accent-color, $font-primary)
        margin-bottom: 0.5rem
        text-align: center

    &__meta
        +text-style(0.9rem, rgba(239, 221, 191, 0.8))
        text-align: center



        &.rarity
            &.common
                color: #ffffff
            &.uncommon
                color: #1eff00
            &.rare
                color: #0070dd
            &.epic
                color: #a335ee

        &.cr
            color: #ff8000

// Сообщения
.loading-message,
.empty-message
    +text-style(1.2rem, $accent-color, $font-primary)
    text-align: center
    padding: 3rem

.empty-message
    color: rgba(239, 221, 191, 0.6)

// Модальное окно
.modal-overlay
    position: fixed
    top: 0
    left: 0
    width: 100%
    height: 100%
    background: rgba(0, 0, 0, 0.85)
    display: flex
    align-items: center
    justify-content: center
    z-index: 10000
    padding: 1rem
    opacity: 0
    visibility: hidden
    +transition(all, 0.3s, cubic-bezier(0.4, 0, 0.2, 1))
    backdrop-filter: blur(8px)
    -webkit-backdrop-filter: blur(8px)

    &.active
        opacity: 1
        visibility: visible

        .modal-content
            transform: scale(1) translateY(0)
            opacity: 1

.modal-content
    display: flex
    overflow: hidden
    border: 2px solid $accent-color
    border-radius: 24px
    max-width: 78.125vw
    width: 100%
    max-height: 95vh
    overflow-x: hidden
    overflow-y: auto
    background: $bg-color
    position: relative
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5)
    transform: scale(0.9) translateY(20px)
    opacity: 0
    +transition(all, 0.4s, cubic-bezier(0.34, 1.56, 0.64, 1))
    // Кастомный скроллбар
    &::-webkit-scrollbar
        width: 6px

    &::-webkit-scrollbar-track
        background: rgba(239, 221, 191, 0.1)
        border-radius: 3px

    &::-webkit-scrollbar-thumb
        background: $accent-color
        border-radius: 3px
.modal-close
    position: absolute
    top: 1.5rem
    right: 1.5rem
    width: 40px
    height: 40px
    background: rgba(239, 221, 191, 0.1)
    border: 1px solid rgba(195, 149, 90, 0.3)
    border-radius: 50%
    color: $text-color
    font-size: 1.5rem
    cursor: pointer
    +flex-center
    +transition(all, 0.2s)
    z-index: 10

    &:hover
        background: rgba(195, 149, 90, 0.2)
        border-color: $accent-color
        color: $accent-color
        transform: rotate(90deg)

// Заголовок модального окна
.modal-header
    position: relative
    padding: 2.5rem 2.5rem 1.5rem
    background: linear-gradient(135deg, rgba(195, 149, 90, 0.1) 0%, transparent 100%)
    border-bottom: 1px solid rgba(195, 149, 90, 0.2)

    &::before
        content: ''
        position: absolute
        top: 0
        left: 0
        right: 0
        height: 3px
        border-radius: 3px 3px 0 0

.modal-title
    +text-style(2.2rem, $accent-color, $font-primary)
    margin-bottom: 0.5rem
    text-align: center
    line-height: 1.2
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3)

.modal-subtitle
    +text-style(1.2rem, rgba(239, 221, 191, 0.8))
    text-align: center
    margin-bottom: 1.5rem
    line-height: 1.4

.modal-image
    width: 17.708vw
    max-height: 500px
    border-radius: 16px
    margin: 0 auto    
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3)
    border: 2px solid rgba(195, 149, 90, 0.3)
    +transition(transform, 0.3s)

    &:hover
        transform: scale(1.02)

// Тело модального окна
.modal-body
    padding: 2rem 2.5rem
    max-height: 60vh

    // Кастомный скроллбар
    &::-webkit-scrollbar
        width: 6px

    &::-webkit-scrollbar-track
        background: rgba(239, 221, 191, 0.1)
        border-radius: 3px

    &::-webkit-scrollbar-thumb
        background: $accent-color
        border-radius: 3px



// Секции модального окна
.modal-section
    margin-bottom: 2rem
    padding-bottom: 1.5rem
    border-bottom: 1px solid rgba(195, 149, 90, 0.1)
    +text-style(1.4rem, $accent-color, $font-primary)

    &:last-of-type
        margin-bottom: 0
        padding-bottom: 0
        border-bottom: none

    &__title
        +text-style(1.4rem, $accent-color, $font-primary)
        margin-bottom: 1rem
        display: flex
        align-items: center
        gap: 0.5rem

        &::before
            content: ''
            width: 4px
            height: 20px
            background: $accent-color
            border-radius: 2px

    &__content
        +text-style(1.4rem, $accent-color, $font-primary)

        line-height: 1.7

        strong
            color: $accent-color
            font-weight: 600

// Сетка статистики
.stats-grid
    display: grid
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr))
    gap: 1rem
    margin: 1.5rem 0

.stat-item
    background: linear-gradient(135deg, rgba(195, 149, 90, 0.1) 0%, rgba(18, 36, 54, 0.3) 100%)
    border: 1px solid rgba(195, 149, 90, 0.3)
    border-radius: 12px
    padding: 1.5rem 1rem
    text-align: center
    +transition(all, 0.3s)
    position: relative
    overflow: hidden

    &::before
        content: ''
        position: absolute
        top: 0
        left: 0
        right: 0
        height: 2px
        background: linear-gradient(90deg, $accent-color, transparent)
        opacity: 0.7

    &:hover
        transform: translateY(-2px)
        border-color: $accent-color
        box-shadow: 0 8px 25px rgba(195, 149, 90, 0.2)

    &__label
        +text-style(0.85rem, rgba(239, 221, 191, 0.8))
        margin-bottom: 0.5rem
        font-weight: 500
        text-transform: uppercase
        letter-spacing: 0.5px

    &__value
        +text-style(1.4rem, $accent-color, $font-primary)
        font-weight: 600

// Контейнер тегов
.tags-container
    display: flex
    flex-wrap: wrap
    gap: 0.75rem
    margin: 1.5rem 0

.tag 
    color: $bg-color
    padding: 0.5rem 1rem
    border-radius: 20px
    +text-style(0.85rem, $text-color)
    font-weight: 600
    border: 1px solid rgba(255, 255, 255, 0.2)
    +transition(all, 0.3s)
    position: relative
    overflow: hidden

    &::before
        content: ''
        position: absolute
        top: 0
        left: -100%
        width: 100%
        height: 100%
        +transition(left, 0.5s)



// Навигация в модальном окне
.modal-nav
    display: flex
    justify-content: space-between
    align-items: center
    padding: 1.5rem 2.5rem
    border-top: 1px solid rgba(195, 149, 90, 0.2)
    background: rgba(18, 36, 54, 0.5)

    .nav-info
        +text-style(1rem, rgba(239, 221, 191, 0.7))

    .nav-buttons
        display: flex
        gap: 1rem

// Индикатор загрузки
.modal-loading
    display: flex
    flex-direction: column
    align-items: center
    justify-content: center
    padding: 3rem
    text-align: center

    .loading-spinner
        width: 50px
        height: 50px
        border: 3px solid rgba(195, 149, 90, 0.3)
        border-top: 3px solid $accent-color
        border-radius: 50%
        animation: spin 1s linear infinite
        margin-bottom: 1rem

    .loading-text
        +text-style(1.1rem, rgba(239, 221, 191, 0.8))

@keyframes spin
    0%
        transform: rotate(0deg)
    100%
        transform: rotate(360deg)

// Адаптивность для модальных окон
@media (max-width: 768px)
    .modal-overlay
        padding: 0.5rem

    .modal-content
        max-width: 100%
        margin: 0.5rem
        border-radius: 20px

    .modal-header
        padding: 1.5rem 1.5rem 1rem

        .modal-title
            +text-style(1.8rem, $accent-color, $font-primary)

        .modal-subtitle
            +text-style(1.1rem, rgba(239, 221, 191, 0.8))

    .modal-body
        padding: 1rem 1.5rem
        max-height: 75vh

    .modal-close
        top: 1rem
        right: 1rem
        width: 35px
        height: 35px

    .stats-grid
        grid-template-columns: repeat(2, 1fr)
        gap: 0.5rem

    .stat-item
        padding: 1rem 0.5rem

        &__value
            +text-style(1.2rem, $accent-color, $font-primary)

    .tags-container
        gap: 0.5rem

    .tag
        padding: 0.4rem 0.8rem
        +text-style(0.8rem, $bg-color)

@media (max-width: 480px)
    .modal-header
        padding: 1.25rem 1.25rem 0.75rem

        .modal-title
            +text-style(1.5rem, $accent-color, $font-primary)

        .modal-subtitle
            +text-style(1rem, rgba(239, 221, 191, 0.8))

    .modal-body
        padding: 0.75rem 1.25rem

    .modal-section
        margin-bottom: 1.5rem
        padding-bottom: 1rem

        &__title
            +text-style(1.2rem, $accent-color, $font-primary)
            margin-bottom: 0.75rem

        &__content
            +text-style(1rem, $text-color)

    .stats-grid
        grid-template-columns: 1fr
        gap: 0.5rem

    .modal-nav
        padding: 1rem 1.25rem
        flex-direction: column
        gap: 1rem
        text-align: center

        .nav-buttons
            width: 100%
            justify-content: center

.hidden
    display: none !important